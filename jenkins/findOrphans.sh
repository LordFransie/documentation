#!/bin/bash  echo 1#Delete any tempfiles left over from the last run and write introductionrm checktmp > /dev/null 2>&1  rm permalinklist1.txt  > /dev/null 2>&1  rm permalinklist2.txt  > /dev/null 2>&1  rm filepermalink1.txt > /dev/null 2>&1  echo 2echo " "echo " "echo  "Checking the $GIT_BRANCH branch for structural errors that can cause a failure for the entire build or for individual files. "echo  ""  echo 3for i in `find . -path ./redirects -prune -o -name "*.md" `	do		if [[ -z $(head $i | grep "published: false") ]];		then 		sed ':a;N;$!ba;s/\n/ /g' $i |  sed 's|-->|-->\n|g' | sed 's|<!--.*-->||g' | sed 's|](|\n](|g'  | grep "](/.*)" | sed 's/.*](//' | sed 's/).*//' | sed 's|#.*||' | grep -v "/api/" | grep -v "^/file/" | sed 's|\/$||' >> permalinklist1.txt		cat permalinklist1.txt | sed 's/ *//g'  | grep -v http | sort | uniq >> permalinklist2.txt		grep permalink $i | sed 's|.* /|/|' | sed 's|\/$||' >> filepermalink1.txt								echo "["`head *.md | grep title | sed 's/title: //'| sed 's/"//g'`"]("`head *.md | grep permalink | sed 's/permalink: //'`)"		fi	done for i in `cat filepermalink1.txt  `	do 		if [[ -z $(grep $i permalinklist2.txt ) ]];		then			echo  ""			echo "==== Orphaned file ==="			echo "Customers have no way to access this file."						echo $i						EXIT="1"		fi	done 